---
title: 06. Ajouter les éléments de caching dans le HtAccess
created at: Tue Sep 07 2021 20:41:13 GMT+0000 (Coordinated Universal Time)
updated at: Tue Jan 04 2022 10:48:18 GMT+0000 (Coordinated Universal Time)
path: /fiches/06-ajouter-les-elements-de-caching-dans-le-htaccess
---

# 06. Ajouter les éléments de caching dans le HtAccess

# Sujet

La fiche #N ([Utiliser un système de cache](/best-practices-WordPress/fiches/12.%20Utiliser%20un%20syst%C3%A8me%20Cache.md)) nous parle de l'importance du cache et de sa mise en place via des extensions WordPress.

Ici, nous allons directement indiquer au serveur Apache les paramétrages de compression et de contrôle du cache que nous souhaitons.

# Exemple

Prenons pour exemple l'image du logo qui se trouve sur chaque page du site.

Si nous ne mettons pas en place de cache, le navigateur la transférera depuis notre serveur à chaque affichage d'une nouvelle page.

Maintenant, compressons notre image (gzip), elle est déjà plus rapide à charger (bien sûr, nous partons du principe qu'elle est bien dimensionnée, et au bon format. cf fiches #N & N).

Ensuite, indiquons que nous souhaitons qu'elle soit mise en cache pendant 1 an.

Lors de sa première visite, le logo est transféré pour l'afficher dans le navigateur. Le visiteur change de page, le navigateur regarde si l'image existe déjà dans ses fichiers mis en cache : oui, alors il ne va pas la chercher sur le serveur.

Attention, toucher au fichier .htaccess peut provoquer des erreurs, sauvegardez et testez.

```apacheconf
<IfModule mod_expires.c>
ExpiresActive On
ExpiresDefault "access plus 1 month"
#Délai de cache des fonts
ExpiresByType application/x-font-ttf "access plus 1 month"
[...]
#Délai de cache des Images
ExpiresByType image/jpg "access plus 1 month"
[...]
#Délai de cache des Autres médias
ExpiresByType video/ogg "access plus 1 month"
[...]
#Délai de cache des Assets
ExpiresByType text/css "access plus 6 month"
ExpiresByType application/javascript "access plus 6 month"
</IfModule>

# En-têtes
Header unset ETag
FileETag None

<ifModule mod_headers.c>
<filesMatch "\.(ico|jpe?g|png|gif)$">
    Header set Cache-Control "public"
</filesMatch>
<filesMatch "\.(css)$">
    Header set Cache-Control "public"
</filesMatch>
<filesMatch "\.(js)$">
    Header set Cache-Control "private"
</filesMatch>
<filesMatch "\.(x?html?|php)$">
    Header set Cache-Control "private, must-revalidate"
</filesMatch>
</ifModule>

# Compressions des fichiers statiques
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/xhtml text/html text/plain text/xml text/javascript application/x-javascript text/css
    BrowserMatch ^Mozilla/4 gzip-only-text/html
    BrowserMatch ^Mozilla/4\.0[678] no-gzip
    BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
    SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary
    Header append Vary User-Agent env=!dont-vary
</IfModule>

AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE text/javascript
AddOutputFilterByType DEFLATE font/opentype
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/json
```

### Sources

<https://www.seomix.fr/guide-htaccess-performances-et-temps-de-chargement/>
